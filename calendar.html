<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendar with Events</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen flex items-center justify-center p-6">

<div class="w-full max-w-3xl bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500 p-1 rounded-2xl shadow-2xl">
  <div class="bg-white rounded-2xl p-8 space-y-6">
    <h1 class="text-3xl font-bold text-center bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500 bg-clip-text text-transparent">
      Calendar with Events
    </h1>

    <!-- Month Navigation -->
    <div class="flex justify-between items-center mb-4">
      <button id="prevMonth" class="px-3 py-1 bg-green-400 text-white rounded-lg shadow-md hover:opacity-90">Prev</button>
      <h2 id="monthYear" class="text-xl font-semibold"></h2>
      <button id="nextMonth" class="px-3 py-1 bg-green-400 text-white rounded-lg shadow-md hover:opacity-90">Next</button>
    </div>

    <!-- Calendar Grid -->
    <div id="calendar" class="grid grid-cols-7 gap-2 text-center"></div>

    <!-- Add Event Modal -->
    <div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
      <div class="bg-white p-6 rounded-2xl w-80 space-y-4">
        <h3 class="text-xl font-bold text-center">Add Event</h3>
        <p id="eventDate" class="text-center font-medium"></p>
        <input type="text" id="eventTitle" placeholder="Event Title"
          class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:outline-none"/>
        <div class="flex justify-between space-x-2">
          <button id="saveEvent" class="bg-gradient-to-r from-green-400 to-green-600 px-4 py-2 text-white rounded-lg font-semibold shadow-md hover:opacity-90 w-1/2">Save</button>
          <button id="cancelEvent" class="bg-gradient-to-r from-red-400 to-red-600 px-4 py-2 text-white rounded-lg font-semibold shadow-md hover:opacity-90 w-1/2">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const calendarEl = document.getElementById('calendar');
const monthYearEl = document.getElementById('monthYear');
const prevMonthBtn = document.getElementById('prevMonth');
const nextMonthBtn = document.getElementById('nextMonth');
const eventModal = document.getElementById('eventModal');
const eventDateEl = document.getElementById('eventDate');
const eventTitleInput = document.getElementById('eventTitle');
const saveEventBtn = document.getElementById('saveEvent');
const cancelEventBtn = document.getElementById('cancelEvent');

let currentDate = new Date();
let selectedDate = null;
let events = JSON.parse(localStorage.getItem('calendarEvents')) || {};

function renderCalendar() {
  calendarEl.innerHTML = '';
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  monthYearEl.textContent = currentDate.toLocaleString('default', { month: 'long', year: 'numeric' });

  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();

  // Fill empty slots before first day
  for (let i = 0; i < firstDay; i++) {
    const emptyCell = document.createElement('div');
    calendarEl.appendChild(emptyCell);
  }

  // Fill days
  for (let day = 1; day <= daysInMonth; day++) {
    const dayCell = document.createElement('div');
    dayCell.className = "p-2 border rounded-lg cursor-pointer hover:bg-gray-100 relative";
    dayCell.textContent = day;

    const dateKey = `${year}-${month+1}-${day}`;
    if (events[dateKey]) {
      const dot = document.createElement('div');
      dot.className = "w-2 h-2 bg-green-500 rounded-full absolute top-1 right-1";
      dayCell.appendChild(dot);
    }

    dayCell.addEventListener('click', () => {
      selectedDate = dateKey;
      eventDateEl.textContent = `Date: ${selectedDate}`;
      eventTitleInput.value = events[selectedDate] || '';
      eventModal.classList.remove('hidden');
    });

    calendarEl.appendChild(dayCell);
  }
}

prevMonthBtn.addEventListener('click', () => {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar();
});
nextMonthBtn.addEventListener('click', () => {
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar();
});

saveEventBtn.addEventListener('click', () => {
  const title = eventTitleInput.value.trim();
  if (title) {
    events[selectedDate] = title;
  } else {
    delete events[selectedDate];
  }
  localStorage.setItem('calendarEvents', JSON.stringify(events));
  eventModal.classList.add('hidden');
  renderCalendar();
});

cancelEventBtn.addEventListener('click', () => {
  eventModal.classList.add('hidden');
});

renderCalendar();
</script>
</body>
</html>